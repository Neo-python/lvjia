<style>
    .print-btn {
        float: right;
    }

    .order-info {
        display: inline-block;
        padding: 0 0 5% 0;
        font-size: 30px;
        font-weight: 100;
        width: 33%;
        font-family: 方正兰亭超细黑简体;
    }

    .wrapper-order-info {
        width: 100%;
        display: -webkit-box;
    }

    .wrapper-order-info div {
        width: 51%;
    }

    .summary-name {
        font-size: x-large;
    }

    .summary-wrapper {
        display: flex;
        position: relative;
        bottom: 0;
    }

    .summary-info {
        margin-right: 20px;
    }

    ul li {
        font-size: 40px;
        font-family: 方正兰亭超细黑简体;
        font-weight: 100;
    }

    h1 {
        display: contents;
        text-align: center;
    }

    p {
        margin: 0;
    }
</style>
<link rel="stylesheet" href="/static/css/neo.css">
<div>
    <button onclick="history.back(-1)" class="cancel-btn">取消/返回</button>
    <button onclick="window.print()" class="print-btn">打印</button>
    <h1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;生产信息汇总
        &nbsp;{{ now.strftime('%m月%d日') }}</h1>
</div>
<div class="wrapper">
    <div class="wrapper-order-info">
        {% for order in orders %}
            <div>
                <ul>
                    <li>{{ order.firm.name }}</li>
                    <li>{{ order.remarks }}</li>
                    {% with name = Name() %}
                        {% for form in order.forms %}
                            {% if name.check(form.person.name) %}
                                <li>
                                    {{ form.product.name }}{{ form.real_quantity }}{{ form.unit.name }}</li>
                            {% else %}
                                <li>
                                    {{ form.person.name }}{{ form.product.name }}{{ form.real_quantity }}{{ form.unit.name }}</li>
                            {% endif %}
                        {% endfor %}
                    {% endwith %}
                </ul>
            </div>
        {% endfor %}

    </div>


</div>
{% for order in orders %}
    <div class="order-info">
        <p class="firm-name">{{ order.firm.name }}</p>
        {% if order.remarks %}
            <span>{{ order.remarks }}</span><br>
        {% endif %}
        {% for form in order.forms %}
            <span>{{ form.person.name }}</span>
            <span>{{ form.product.name }}</span>
            <span>{{ form.quantity }}</span>
            <span>{{ form.unit.name }}</span> <br>
        {% endfor %}
    </div>
{% endfor %}
<div class="summary-wrapper">
    {% for key, values in form_info.items() %}
        <div class="summary-info">
            <span class="summary-name">{{ key }}{{ values.quantity|round(2) }}{{ values.unit }}</span>
        </div>
    {% endfor %}
</div>
{#<script>#}
{#    window.onload = function () {#}
{#        window.print();#}
{#    }#}
{#</script>#}
